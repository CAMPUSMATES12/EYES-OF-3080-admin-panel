<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eyes of 3080 Admin Panel</title>

<!-- Favicon -->
<link rel="icon" type="image/png" href="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/EYES%20OF%203080%20logo">

<style>
* { margin:0; padding:0; box-sizing:border-box; }
body, html {
  width:100%; height:100%;
  font-family:'Poppins',sans-serif;
  overflow:hidden;
  background:linear-gradient(135deg, #0a5a2b, #155e36);
  display:flex; justify-content:center; align-items:center;
  color:#fff;
}

/* Welcome container */
.welcome {
  text-align:center;
  padding:50px 40px;
  border-radius:20px;
  background:rgba(0,0,0,0.25);
  backdrop-filter:blur(10px);
  box-shadow:0 0 40px rgba(0,255,0,0.3);
  animation:fadeIn 1.5s ease forwards;
  max-width:400px;
  width:90%;
  z-index:1;
}
@keyframes fadeIn {0%{opacity:0;transform:scale(0.9);}100%{opacity:1;transform:scale(1);}}

.welcome img {
  width:130px; height:130px;
  border-radius:50%;
  margin-bottom:20px;
  border:3px solid rgba(0,255,0,0.5);
  box-shadow:0 0 20px rgba(0,255,0,0.6);
  transition:transform 0.3s;
}
.welcome img:hover {transform:scale(1.05);}

h1 { font-size:2rem; margin-bottom:10px; letter-spacing:1px; }
p.description { font-size:0.95rem; color:#d0ffd0; margin-bottom:25px; line-height:1.5; }

/* Enter button */
.enter-btn {
  padding:15px 35px;
  font-size:1rem; font-weight:600;
  color:#fff;
  background:linear-gradient(90deg, #0a5a2b, #33cc66);
  border:none; border-radius:50px;
  cursor:pointer;
  box-shadow:0 4px 12px rgba(0,255,0,0.4);
  transition: all 0.3s ease;
}
.enter-btn:hover {
  background:linear-gradient(90deg, #33cc66, #0a5a2b);
  transform:translateY(-3px) scale(1.05);
  box-shadow:0 6px 20px rgba(0,255,0,0.6);
}

/* Auth Modal */
#authModal {
  position:fixed; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.7);
  display:flex; justify-content:center; align-items:center;
  z-index:2;
  display:none;
}
.auth-container {
  background:rgba(0,0,0,0.85);
  padding:30px;
  border-radius:20px;
  width:90%; max-width:400px;
  text-align:center;
  box-shadow:0 0 40px rgba(0,255,0,0.5);
}
.auth-container h2 { color:#33ff77; margin-bottom:20px; }
.auth-container input {
  width:80%; padding:12px; margin:10px 0;
  border:none; border-radius:8px;
  background:#0a5a2b; color:#fff;
}
.auth-container button {
  width:50%; padding:12px;
  margin-top:15px;
  background:linear-gradient(90deg,#0a5a2b,#33cc66);
  border:none; border-radius:50px;
  color:#fff; font-weight:600;
  cursor:pointer;
  transition: all 0.3s ease;
}
.auth-container button:hover { transform:scale(1.05); box-shadow:0 4px 12px rgba(0,255,0,0.5); }
.auth-container p { color:#c3ffc3; margin-top:12px; font-size:0.9rem; }
.auth-container a { color:#33ff77; cursor:pointer; text-decoration:none; }
.auth-container a:hover { text-decoration:underline; }

/* Particles */
canvas { position:absolute; top:0; left:0; width:100%; height:100%; z-index:0; }
</style>
</head>
<body>

<canvas id="particles"></canvas>

<div class="welcome">
  <img src="https://vtpsruejncfykiazrfsx.supabase.co/storage/v1/object/public/PRODUCTS/EYES%20OF%203080%20logo" alt="EYES OF 3080 Logo">
  <h1>üëÅÔ∏è Eyes of 3080 Admin Panel</h1>
  <p class="description">Your central hub to manage all UNIOSUN news, campus gist, academic updates, marketplace listings, and PDF resources. Efficient, professional, and easy to navigate.</p>
  <button class="enter-btn" onclick="openAuthModal()">Enter Admin Panel</button>
</div>

<!-- Auth Modal -->
<div id="authModal">
  <div class="auth-container">
    <!-- Signup Form -->
    <div id="signupForm">
      <h2>Sign Up</h2>
      <input type="text" id="signupName" placeholder="Admin Name" required>
      <input type="email" id="signupEmail" placeholder="Email" required>
      <input type="password" id="signupPassword" placeholder="Password" required>
      <button onclick="signUp()">Sign Up</button>
      <p>Already have an account? <a onclick="showLogin()">Login</a></p>
    </div>
    <!-- Login Form -->
    <div id="loginForm" style="display:none;">
      <h2>Login</h2>
      <input type="email" id="loginEmail" placeholder="Email" required>
      <input type="password" id="loginPassword" placeholder="Password" required>
      <button onclick="login()">Login</button>
      <p>Don't have an account? <a onclick="showSignup()">Sign Up</a></p>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
const SUPABASE_URL = "https://vtpsruejncfykiazrfsx.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ0cHNydWVqbmNmeWtpYXpyZnN4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3NDA5NzQsImV4cCI6MjA3MjMxNjk3NH0.UV55gbsSAgnyolxJhIYTaJUpvoJFsJn0_-LMNwhwAK0"; 
const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

// Show/Hide Modal
function openAuthModal(){ document.getElementById('authModal').style.display='flex'; }
function showLogin(){ document.getElementById('signupForm').style.display='none'; document.getElementById('loginForm').style.display='block'; }
function showSignup(){ document.getElementById('signupForm').style.display='block'; document.getElementById('loginForm').style.display='none'; }

// Sign Up
async function signUp(){
  const name = document.getElementById('signupName').value;
  const email = document.getElementById('signupEmail').value;
  const password = document.getElementById('signupPassword').value;
  const { user, error } = await supabase.auth.signUp({ email, password, options:{ data:{ full_name:name } }});
  if(error){ alert(error.message); return; }
  alert('‚úÖ Sign Up Successful! Redirecting...');
  window.location.href = "admin.html";
}

// Login
async function login(){
  const email = document.getElementById('loginEmail').value;
  const password = document.getElementById('loginPassword').value;
  const { data, error } = await supabase.auth.signInWithPassword({ email, password });
  if(error){ alert(error.message); return; }
  const userName = data.user.user_metadata.full_name || "Admin";
  alert(`‚úÖ Welcome ${userName}! Redirecting...`);
  window.location.href = "admin.html";
}

// === Particles ===
const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d');
let w = canvas.width = window.innerWidth;
let h = canvas.height = window.innerHeight;
window.addEventListener('resize', ()=>{ w=canvas.width=window.innerWidth; h=canvas.height=window.innerHeight; });

class Particle {
  constructor(){ 
    this.x=Math.random()*w; this.y=Math.random()*h; this.size=Math.random()*2+1;
    this.speedX=(Math.random()-0.5)*1.2; this.speedY=(Math.random()-0.5)*1.2;
  }
  update(){ 
    this.x+=this.speedX; this.y+=this.speedY; 
    if(this.x<0||this.x>w) this.speedX*=-1; 
    if(this.y<0||this.y>h) this.speedY*=-1; 
  }
  draw(){ 
    ctx.beginPath(); 
    ctx.arc(this.x,this.y,this.size,0,Math.PI*2); 
    ctx.fillStyle='rgba(0,255,0,0.6)'; 
    ctx.fill(); 
  }
}
const particles=[]; for(let i=0;i<120;i++) particles.push(new Particle());
function connectParticles(){ 
  for(let a=0;a<particles.length;a++){ 
    for(let b=a;b<particles.length;b++){
      let dx=particles[a].x-particles[b].x, dy=particles[a].y-particles[b].y;
      let dist=Math.sqrt(dx*dx+dy*dy);
      if(dist<100){ 
        ctx.beginPath(); 
        ctx.strokeStyle=`rgba(0,255,0,${1-dist/100})`;
        ctx.moveTo(particles[a].x,particles[a].y); 
        ctx.lineTo(particles[b].x,particles[b].y); 
        ctx.stroke(); 
      }
    }
  }
}
function animate(){ 
  ctx.clearRect(0,0,w,h); 
  particles.forEach(p=>{p.update(); p.draw();}); 
  connectParticles(); 
  requestAnimationFrame(animate); 
}
animate();
</script>

</body>
</html>
